name: Fun Experiments

on:
  workflow_dispatch:
    inputs:
      experiment_type:
        description: 'Choose an experiment'
        required: true
        default: 'weather'
        type: choice
        options:
          - weather
          - quote
          - cat-fact
          - random-color
          - github-stats

jobs:
  experiments:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
      
    - name: Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '20.x'
        
    - name: Weather API Experiment
      if: ${{ github.event.inputs.experiment_type == 'weather' }}
      run: |
        echo "ðŸŒ¤ï¸ Weather Experiment"
        curl -s "wttr.in/Seoul?format=3" || echo "Weather API unavailable"
        
    - name: Inspirational Quote
      if: ${{ github.event.inputs.experiment_type == 'quote' }}
      run: |
        echo "ðŸ’­ Daily Quote"
        curl -s "https://api.quotable.io/random" | jq -r '.content + " - " + .author'
        
    - name: Cat Fact
      if: ${{ github.event.inputs.experiment_type == 'cat-fact' }}
      run: |
        echo "ðŸ± Cat Fact"
        curl -s "https://catfact.ninja/fact" | jq -r '.fact'
        
    - name: Random Color Generator
      if: ${{ github.event.inputs.experiment_type == 'random-color' }}
      run: |
        echo "ðŸŽ¨ Random Color"
        COLOR=$(openssl rand -hex 3)
        echo "Hex: #$COLOR"
        echo "RGB: $(printf "%d %d %d" 0x${COLOR:0:2} 0x${COLOR:2:2} 0x${COLOR:4:2})"
        
    - name: GitHub Repository Stats
      if: ${{ github.event.inputs.experiment_type == 'github-stats' }}
      run: |
        echo "ðŸ“Š Repository Stats"
        echo "Repository: ${{ github.repository }}"
        echo "Branch: ${{ github.ref_name }}"
        echo "Commit: ${{ github.sha }}"
        echo "Actor: ${{ github.actor }}"
        echo "Event: ${{ github.event_name }}"
        
    - name: Generate Fun Report
      run: |
        echo "# ðŸ§ª Fun Experiment Report" > experiment-report.md
        echo "" >> experiment-report.md
        echo "**Experiment Type:** ${{ github.event.inputs.experiment_type }}" >> experiment-report.md
        echo "**Timestamp:** $(date)" >> experiment-report.md
        echo "**Repository:** ${{ github.repository }}" >> experiment-report.md
        echo "**Branch:** ${{ github.ref_name }}" >> experiment-report.md
        echo "" >> experiment-report.md
        echo "## ðŸŽ¯ Results" >> experiment-report.md
        echo "Experiment completed successfully! ðŸŽ‰" >> experiment-report.md
        
    - name: Upload Experiment Report
      uses: actions/upload-artifact@v4
      with:
        name: experiment-report
        path: experiment-report.md
